<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NBA Season Simulator</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        table {
            border-collapse: collapse;
            width: 100%;
        }

        th, td {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background-color: #f2f2f2;
        }
    </style>
</head>
<body>
<h1>NBA Season Simulator</h1>
<button id="simulateButton">Simulate NBA Season</button>
<h2>Eastern Conference</h2>
<table id="eastTable" class="conference-table">
    <tr>
        <th>Rank</th>
        <th>Team</th>
        <th>Wins</th>
        <th>Losses</th>
        <th>Win Percent</th>
    </tr>
</table>

<h2>Western Conference</h2>
<table id="westTable" class="conference-table">
    <tr>
        <th>Rank</th>
        <th>Team</th>
        <th>Wins</th>
        <th>Losses</th>
        <th>Win Percent</th>
    </tr>
</table>
<div class="playoff-bracket">
    <div class="matchup">
        <p>Round 1 - Team 1 vs Team 2</p>
        <p>Winner: TBD</p>
    </div>
    <!-- Add more matchup divs as needed -->
</div>
<div id="westPlayoffBracket">
    <!-- Playoff bracket will be displayed here -->
</div>
<div id="eastPlayoffBracket">
    <!-- Playoff bracket will be displayed here -->
</div>

<div id="westSemiFinalsBracket">
    <!-- Playoff bracket will be displayed here -->
</div>
<div id="eastSemiFinalsBracket">
    <!-- Playoff bracket will be displayed here -->
</div>
<div id="eastFinalsBracket"></div>
<div id="westFinalsBracket"></div>
<div id="nbaFinalsBracket"></div>


<script>
    // Define teams and their initial records
    const teams = {
        east: [
            { name: 'Boston Celtics', wins: 0, losses: 0, strength: 100, playoffWins: 0 },
            { name: 'Brooklyn Nets', wins: 0, losses: 0, strength: 42, playoffWins: 0 },
            { name: 'Milwaukee Bucks', wins: 0, losses: 0, strength: 64, playoffWins: 0 },
            { name: 'Philadelphia 76ers', wins: 0, losses: 0, strength: 17, playoffWins: 0 },
            { name: 'Cleveland Cavaliers', wins: 0, losses: 0, strength: 46, playoffWins: 0 },
            { name: 'Toronto Raptors', wins: 0, losses: 0, strength: 73, playoffWins: 0 },
            { name: 'Chicago Bulls', wins: 0, losses: 0, strength: 76, playoffWins: 0 },
            { name: 'Miami Heat', wins: 0, losses: 0, strength: 34, playoffWins: 0 },
            { name: 'Atlanta Hawks', wins: 0, losses: 0, strength: 97, playoffWins: 0 },
            { name: 'New York Knicks', wins: 0, losses: 0, strength: 36, playoffWins: 0 },
            { name: 'Washington Wizards', wins: 0, losses: 0, strength: 57, playoffWins: 0 },
            { name: 'Charlotte Hornets', wins: 0, losses: 0, strength: 72, playoffWins: 0 },
            { name: 'Indiana Pacers', wins: 0, losses: 0, strength: 44, playoffWins: 0 },
            { name: 'Detroit Pistons', wins: 0, losses: 0, strength: 26, playoffWins: 0 },
            { name: 'Orlando Magic', wins: 0, losses: 0, strength: 62, playoffWins: 0 }
        ],
        west: [
            { name: 'Los Angeles Lakers', wins: 0, losses: 0, strength: 21, playoffWins: 0 },
            { name: 'Golden State Warriors', wins: 0, losses: 0, strength: 68, playoffWins: 0},
            { name: 'Phoenix Suns', wins: 0, losses: 0, strength: 62, playoffWins: 0 },
            { name: 'LA Clippers', wins: 0, losses: 0, strength: 41, playoffWins: 0 },
            { name: 'Denver Nuggets', wins: 0, losses: 0, strength: 72, playoffWins: 0 },
            { name: 'Dallas Mavericks', wins: 0, losses: 0, strength: 87, playoffWins: 0 },
            { name: 'Memphis Grizzlies', wins: 0, losses: 0, strength: 31, playoffWins: 0 },
            { name: 'Minnesota Timberwolves', wins: 0, losses: 0, strength: 66, playoffWins: 0 },
            { name: 'New Orleans Pelicans', wins: 0, losses: 0, strength: 86, playoffWins: 0 },
            { name: 'Portland Trail Blazers', wins: 0, losses: 0, strength: 32, playoffWins: 0 },
            { name: 'Sacramento Kings', wins: 0, losses: 0, strength: 27, playoffWins: 0 },
            { name: 'San Antonio Spurs', wins: 0, losses: 0, strength: 19, playoffWins: 0 },
            { name: 'Utah Jazz', wins: 0, losses: 0, strength: 42, playoffWins: 0 },
            { name: 'Oklahoma City Thunder', wins: 0, losses: 0, strength: 56, playoffWins: 0 },
            { name: 'Houston Rockets', wins: 0, losses: 0, strength: 67, playoffWins: 0 }
        ]
    };
    function resetTeamRecords() {
        teams.east.forEach(team => {
            team.wins = 0;
            team.losses = 0;
        });

        teams.west.forEach(team => {
            team.wins = 0;
            team.losses = 0;
        });
    }

    // Function to simulate a game
    function simulateGame(team1, team2) {
        // Calculate the probability of team1 winning based on their strengths
        const totalStrength = team1.strength + team2.strength;
        const team1Probability = team1.strength / totalStrength;

        // Generate a random number between 0 and 1
        const randomResult = Math.random();

        // Determine the game outcome based on probabilities and randomness
        if (randomResult <= team1Probability) {
            team1.wins++;
            team2.losses++;
        } else {
            team1.losses++;
            team2.wins++;
        }
    }

    // Function to simulate the entire NBA season
    function simulateNBASeason() {
        resetTeamRecords();

        // Simulate games within each conference
        for (let t = 0; t < 4; t++) {
            for (let i = 0; i < teams.east.length; i++) {
                for (let j = i + 1; j < teams.east.length; j++) {
                    simulateGame(teams.east[i], teams.east[j]);
                }
            }
        }
        for (let t = 0; t < 4; t++) {
            for (let i = 0; i < teams.west.length; i++) {
                for (let j = i + 1; j < teams.west.length; j++) {
                    simulateGame(teams.west[i], teams.west[j]);

                }
            }
        }

        //simulate between conference

        for(let j = 0; j<16; j++) {
            for (let i = 0; i < teams.west.length; i++) {

                simulateGame(teams.west[i], teams.east[i]);


            }
        }
        //each teams plays 10 more intraconference games
        for(let j = 0; j<10; j++) {
            for (let i = 0; i < teams.west.length; i++) {
                simulateGame(teams.west[i], teams.east[i]);
            }
        }
        displayResults();
        simulatePlayoffs();

    }

    // Function to display the results in the tables
    function displayResults() {
        const eastTable = document.getElementById('eastTable');
        const westTable = document.getElementById('westTable');

        // Clear existing table rows
        eastTable.innerHTML = '<tr><th>Rank</th><th>Team</th><th>Wins</th><th>Losses</th><th>Win Percent</th></tr>';
        westTable.innerHTML = '<tr><th>Rank</th><th>Team</th><th>Wins</th><th>Losses</th><th>Win Percent</th></tr>';


        // Sort teams by wins (most wins at the top)
        const sortedEastTeams = teams.east.slice().sort((a, b) => b.wins - a.wins);
        const sortedWestTeams = teams.west.slice().sort((a, b) => b.wins - a.wins);

        // Add new rows for Eastern Conference teams
        sortedEastTeams.forEach((team, index) => {
            const row = eastTable.insertRow(-1);
            const winPercentage = (team.wins / (team.wins + team.losses) * 100).toFixed(2);
            row.insertCell(0).textContent = index + 1;
            row.insertCell(1).textContent = team.name;
            row.insertCell(2).textContent = team.wins;
            row.insertCell(3).textContent = team.losses;
            row.insertCell(4).textContent = winPercentage + "%";
        });

        // Add new rows for Western Conference teams
        sortedWestTeams.forEach((team, index) => {
            const row = westTable.insertRow(-1);
            const winPercentage = (team.wins / (team.wins + team.losses) * 100).toFixed(2);
            row.insertCell(0).textContent = index + 1;
            row.insertCell(1).textContent = team.name;
            row.insertCell(2).textContent = team.wins;
            row.insertCell(3).textContent = team.losses;
            row.insertCell(4).textContent = winPercentage + "%";
        });
    }
    /*function simulatePlayoffs() {
        // Get the top 8 teams from each conference
        const eastPlayoffTeams = teams.east.slice().sort((a, b) => b.wins - a.wins).slice(0, 8);
        const westPlayoffTeams = teams.west.slice().sort((a, b) => b.wins - a.wins).slice(0, 8);

        // Generate playoff matchups between corresponding seeds within each conference
        let westPlayoffBracket = [];
        let eastPlayoffBracket = [];

        // Loop to create playoff matchups for the Western Conference
        for (let i = 0; i < westPlayoffTeams.length / 2; i++) {
            const highSeedIndex = i;
            const lowSeedIndex = westPlayoffTeams.length - 1 - i;

            const highSeed = {
                team: westPlayoffTeams[highSeedIndex],
                seed: highSeedIndex + 1
            };

            const lowSeed = {
                team: westPlayoffTeams[lowSeedIndex],
                seed: lowSeedIndex + 1
            };

            const playoffMatchup = {
                highSeed: highSeed,
                lowSeed: lowSeed
            };

            westPlayoffBracket.push(playoffMatchup);
        }

        // Loop to create playoff matchups for the East Conference
        for (let i = 0; i < eastPlayoffTeams.length / 2; i++) {
            const highSeedIndex = i;
            const lowSeedIndex = eastPlayoffTeams.length - 1 - i;

            const highSeed = {
                team: eastPlayoffTeams[highSeedIndex],
                seed: highSeedIndex + 1
            };

            const lowSeed = {
                team: eastPlayoffTeams[lowSeedIndex],
                seed: lowSeedIndex + 1
            };

            const playoffMatchup = {
                highSeed: highSeed,
                lowSeed: lowSeed
            };

            eastPlayoffBracket.push(playoffMatchup);
        }

        // Display the playoff matchups for the Western Conference
        const westPlayoffContainer = document.getElementById('westPlayoffBracket');
        westPlayoffContainer.innerHTML = '';
        westPlayoffBracket.forEach(matchup => {
            const matchupElement = document.createElement('div');
            matchupElement.textContent = `${matchup.highSeed.team.name} vs ${matchup.lowSeed.team.name}`;
            westPlayoffContainer.appendChild(matchupElement);
        });

        // Display the playoff matchups for the Eastern Conference
        const eastPlayoffContainer = document.getElementById('eastPlayoffBracket');
        eastPlayoffContainer.innerHTML = '';
        eastPlayoffBracket.forEach(matchup => {
            const matchupElement = document.createElement('div');
            matchupElement.textContent = `${matchup.highSeed.team.name} vs ${matchup.lowSeed.team.name}`;
            eastPlayoffContainer.appendChild(matchupElement);
        });



        // Generate and display semi-final matchups
        const westSemiFinals = generateSemiFinals(westPlayoffBracket);
        displaySemiFinals(westSemiFinals, 'westSemiFinalsBracket');

        const eastSemiFinals = generateSemiFinals(eastPlayoffBracket);
        displaySemiFinals(eastSemiFinals, 'eastSemiFinalsBracket');
    }*/

    // Function to generate semi-final matchups
    /*function generateSemiFinals(playoffBracket) {
        const semiFinals = [];
        let winners = [];
        for (let i = 0; i < playoffBracket.length; i++) {
            winners[i] = simulatePlayoffRound(playoffBracket[i].highSeed, playoffBracket[i].lowSeed);
            console.log(winners[i].team.name);
        }
        for(let i = 0; i < winners.length - 1; i+=2){
            if(winners[i].seed < winners[i+1].seed){
                const playoffMatchup = {
                    highSeed: winners[i],
                    lowSeed: winners[i+1]
                }
                semiFinals.push(playoffMatchup);
            }
            else{
                const playoffMatchup = {
                    highSeed: winners[i+1],
                    lowSeed: winners[i]
                }
                semiFinals.push(playoffMatchup);
            }

        }
        return semiFinals;
    }
    */


    // Function to display semi-final matchups
    function displaySemiFinals(semiFinals, containerId) {
        const semiFinalsContainer = document.getElementById(containerId);
        semiFinalsContainer.innerHTML = '';
        semiFinals.forEach(matchup => {
            const matchupElement = document.createElement('div');
            matchupElement.textContent = `${matchup.highSeed.team.name} vs ${matchup.lowSeed.team.name}`;
            semiFinalsContainer.appendChild(matchupElement);
        });
    }


    /*function simulatePlayoffRound(teamSeed1, teamSeed2) {
        // Simulate a single game for the playoff round
        let team1 = teamSeed1.team;
        let team2 = teamSeed2.team;
        const totalStrength = team1.strength + team2.strength;
        const team1Probability = team1.strength / totalStrength;

        while (team1.playoffWins < 4 || team2.playoffWins < 4) {
            // Generate a random number between 0 and 1
            const randomResult = Math.random();

            // Determine the game outcome based on probabilities and randomness
            if (randomResult <= team1Probability) {
                team1.playoffWins++;

            } else {

                team2.playoffWins++;
            }
        }

        if(team1.playoffWins === 4){
            return teamSeed1;
        }
        else
            return teamSeed2;

    }*/

    /*function displayPlayoffBracket(playoffBracket) {
        const playoffContainer = document.getElementById('playoffContainer');
        playoffContainer.innerHTML = ''; // Clear existing content

        // Create elements for each matchup and append to the container
        playoffBracket.forEach((matchup, index) => {
            const matchupDiv = document.createElement('div');
            matchupDiv.classList.add('matchup');
            const matchupText = document.createElement('p');
            matchupText.textContent = `Round ${Math.floor(index / 2) + 1} - ${matchup.eastTeam.name} vs ${matchup.westTeam.name}`;
            const winnerText = document.createElement('p');
            winnerText.textContent = matchup.winner ? `Winner: ${matchup.winner.name}` : 'Winner: TBD';
            matchupDiv.appendChild(matchupText);
            matchupDiv.appendChild(winnerText);
            playoffContainer.appendChild(matchupDiv);
        });
    }*/



    function simulatePlayoffs() {
        // Get the top 8 teams from each conference
        const eastPlayoffTeams = teams.east.slice().sort((a, b) => b.wins - a.wins).slice(0, 8);
        const westPlayoffTeams = teams.west.slice().sort((a, b) => b.wins - a.wins).slice(0, 8);

        // Generate playoff matchups between corresponding seeds within each conference
        let westPlayoffBracket = generatePlayoffBracket(westPlayoffTeams);
        let eastPlayoffBracket = generatePlayoffBracket(eastPlayoffTeams);

        // Display the initial playoff matchups
        displayPlayoffBracket(westPlayoffBracket, 'westPlayoffBracket');
        displayPlayoffBracket(eastPlayoffBracket, 'eastPlayoffBracket');

        // Simulate the first round of playoffs
        westPlayoffBracket = simulatePlayoffRound(westPlayoffBracket);
        eastPlayoffBracket = simulatePlayoffRound(eastPlayoffBracket);

        // Display the updated playoff brackets after the first round
        displayPlayoffBracket(westPlayoffBracket, 'westPlayoffBracket');
        displayPlayoffBracket(eastPlayoffBracket, 'eastPlayoffBracket');

        // Generate and display semi-final matchups
        let westSemiFinals = generateSemiFinals(westPlayoffBracket);
        let eastSemiFinals = generateSemiFinals(eastPlayoffBracket);
        displaySemiFinals(westSemiFinals, 'westSemiFinalsBracket');
        displaySemiFinals(eastSemiFinals, 'eastSemiFinalsBracket');

        westSemiFinals = simulatePlayoffRound(westSemiFinals);
        eastSemiFinals = simulatePlayoffRound(eastSemiFinals);
        displayPlayoffBracket(westSemiFinals, 'westSemiFinalsBracket');
        displayPlayoffBracket(eastSemiFinals, 'eastSemiFinalsBracket');

        // Simulate conference finals
        let { eastFinalMatchup, westFinalMatchup } = generateConferenceFinals(eastSemiFinals, westSemiFinals);


        let eastFinalResult = simulatePlayoffMatchup(eastFinalMatchup.highSeed, westFinalMatchup.lowSeed);
        let westFinalResult = simulatePlayoffMatchup(westFinalMatchup.highSeed, westFinalMatchup.lowSeed);

        // Display conference finals results
        displayConferenceFinals(eastFinalResult, 'eastFinalsBracket');
        displayConferenceFinals(westFinalResult, 'westFinalsBracket');

        // Simulate NBA finals
        const nbafinals = {
            highSeed: eastFinalResult.winnerSeed,
            lowSeed: westFinalResult.winnerSeed,
        };

        const nbaFinalsResult = simulatePlayoffMatchup(nbafinals.highSeed, nbafinals.lowSeed);

        // Display NBA finals result
        displayNBAFinals(nbaFinalsResult, 'nbaFinalsBracket');

    }

    function generatePlayoffBracket(playoffTeams) {
        const playoffBracket = [];

        for (let i = 0; i < playoffTeams.length / 2; i++) {
            const highSeedIndex = i;
            const lowSeedIndex = playoffTeams.length - 1 - i;

            const highSeed = {
                team: playoffTeams[highSeedIndex],
                seed: highSeedIndex + 1,
            };

            const lowSeed = {
                team: playoffTeams[lowSeedIndex],
                seed: lowSeedIndex + 1,
            };

            const playoffMatchup = {
                highSeed: highSeed,
                lowSeed: lowSeed,
                winner: null,
            };

            playoffBracket.push(playoffMatchup);
        }

        return playoffBracket;
    }

    function simulatePlayoffRound(playoffBracket) {
        const updatedPlayoffBracket = [];

        for (const matchup of playoffBracket) {
            const winner = simulatePlayoffSeries(matchup.highSeed.team, matchup.lowSeed.team);
            const winnerSeed = winner === matchup.highSeed.team ? matchup.highSeed : matchup.lowSeed;

            updatedPlayoffBracket.push({
                ...matchup,
                winner: winner,
                winnerSeed: winnerSeed,
            });
        }

        return updatedPlayoffBracket;
    }


    function simulatePlayoffSeries(team1, team2) {
        let team1Wins = 0;
        let team2Wins = 0;

        while (team1Wins < 4 && team2Wins < 4) {
            const totalStrength = team1.strength + team2.strength;
            const team1Probability = team1.strength / totalStrength;
            const randomResult = Math.random();

            if (randomResult <= team1Probability) {
                team1Wins++;
            } else {
                team2Wins++;
            }
        }

        return team1Wins === 4 ? team1 : team2;
    }

    function displayPlayoffBracket(playoffBracket, containerId) {
        const playoffContainer = document.getElementById(containerId);
        playoffContainer.innerHTML = '';

        playoffBracket.forEach((matchup) => {
            const matchupElement = document.createElement('div');
            matchupElement.textContent = `${matchup.highSeed.team.name} vs ${matchup.lowSeed.team.name} - Winner: ${matchup.winner ? matchup.winner.name : 'TBD'}`;
            playoffContainer.appendChild(matchupElement);
        });
    }
    function generateSemiFinals(playoffBracket) {
        const semiFinals = [];
        const winners = playoffBracket.filter((matchup) => matchup.winner);

        for (let i = 0; i < winners.length - 1; i += 2) {
            if (winners[i].winnerSeed.seed < winners[i + 1].winnerSeed.seed) {
                const playoffMatchup = {
                    highSeed: winners[i].winnerSeed,
                    lowSeed: winners[i + 1].winnerSeed,
                };
                semiFinals.push(playoffMatchup);
            } else {
                const playoffMatchup = {
                    highSeed: winners[i + 1].winnerSeed,
                    lowSeed: winners[i].winnerSeed,
                };
                semiFinals.push(playoffMatchup);
            }
        }

        return semiFinals;
    }
    function generateConferenceFinals(eastSemiFinals, westSemiFinals) {
        const eastFinalMatchup = {
            highSeed: eastSemiFinals[0].highSeed,
            lowSeed: eastSemiFinals[0].lowSeed,
        };

        const westFinalMatchup = {
            highSeed: westSemiFinals[0].highSeed,
            lowSeed: westSemiFinals[0].lowSeed,
        };

        return { eastFinalMatchup, westFinalMatchup };
    }
    function simulatePlayoffMatchup(highSeed, lowSeed) {
        const winner = simulatePlayoffSeries(highSeed.team, lowSeed.team);
        const winnerSeed = winner === highSeed.team ? highSeed : lowSeed;

        return { winner: winner, winnerSeed: winnerSeed, lowSeed: lowSeed, highSeed: highSeed };
    }

    function displayConferenceFinals(finalResult, containerId) {
        const finalContainer = document.getElementById(containerId);
        finalContainer.innerHTML = '';

        if (finalResult && finalResult.winnerSeed && finalResult.winnerSeed.team ) {
            const matchupElement = document.createElement('div');
            matchupElement.textContent = `${finalResult.winnerSeed.team.name} vs ${finalResult.winnerSeed === finalResult.highSeed ? finalResult.lowSeed.team.name : finalResult.highSeed.team.name} - Winner: ${finalResult.winner.name}`;
            finalContainer.appendChild(matchupElement);
        } else {
            const matchupElement = document.createElement('div');
            matchupElement.textContent = 'No results available.';
            finalContainer.appendChild(matchupElement);
        }
    }

    function displayNBAFinals(finalResult, containerId) {
        const finalContainer = document.getElementById(containerId);
        finalContainer.innerHTML = '';

        if (finalResult && finalResult.winnerSeed && finalResult.winnerSeed.team && finalResult.highSeed && finalResult.lowSeed) {
            const matchupElement = document.createElement('div');
            matchupElement.textContent = `NBA Finals: ${finalResult.winnerSeed.team.name} vs ${finalResult.winnerSeed === finalResult.highSeed ? finalResult.lowSeed.team.name : finalResult.highSeed.team.name} - Winner: ${finalResult.winner.name}`;
            finalContainer.appendChild(matchupElement);
        } else {
            const matchupElement = document.createElement('div');
            matchupElement.textContent = 'No results available.';
            finalContainer.appendChild(matchupElement);
        }
    }

    // Add event listener to the button
    const simulateButton = document.getElementById('simulateButton');
    simulateButton.addEventListener('click', simulateNBASeason);
</script>
</body>
</html>